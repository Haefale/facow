<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠ¤ë§ˆíŠ¸íŒœ - ì‹±ê·¸ëŸ¬ìš´ ì´ˆë¡ë¹› ì—¬ë¦„ ì—ë””ì…˜</title>

    <style>
        /* í°íŠ¸ ë° ê¸°ë³¸ ì„¤ì • */
        body {
            /* ğŸ¨ ë³€ê²½: ì „ì²´ì ì¸ ë°°ê²½ì„ ì—°í•œ ì´ˆë¡ë¹›ìœ¼ë¡œ */
            font-family: 'Consolas', 'Malgun Gothic', monospace;
            background-color: #E8F5E9; /* ì•„ì£¼ ì—°í•œ í’€ììƒ‰ / ë¯¼íŠ¸ ê·¸ë¦° */
            color: #1B5E20; /* ì§™ì€ ë…¹ìƒ‰ ê³„ì—´ ê¸€ììƒ‰ */
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            cursor: none;
        }

        /* í—¤ë” */
        header {
            /* ğŸ¨ ë³€ê²½: í—¤ë” ìƒ‰ìƒë„ ì´ˆë¡ë¹›ê³¼ ì–´ìš¸ë¦¬ê²Œ */
            background-color: #4CAF50; /* ì¤‘ê°„ í†¤ì˜ ì´ˆë¡ìƒ‰ */
            color: #FFFFFF; /* í°ìƒ‰ ê¸€ì”¨ */
            padding: 20px 15px;
            text-align: center;
            border-bottom: 3px solid #66BB6A;
        }

        #farm-name-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 5px;
        }

        #farm-name {
            font-size: 2.2em;
            margin: 0;
            margin-right: 15px;
        }

        #edit-name-btn {
            /* ğŸ¨ ë³€ê²½: ë²„íŠ¼ ìƒ‰ìƒë„ ì´ˆë¡ë¹›ê³¼ ì–´ìš¸ë¦¬ê²Œ */
            background-color: #66BB6A;
            color: #FFFFFF;
            border: 1px solid rgba(255, 255, 255, 0.5);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.8em;
            transition: background-color 0.2s;
        }
        #edit-name-btn:hover {
            background-color: #388E3C; /* ì§™ì€ ë…¹ìƒ‰ */
        }

        header p {
            font-size: 1.1em;
            margin: 5px 0;
        }

        #current-time {
            font-size: 1.0em;
            font-weight: 300;
            opacity: 0.9;
            margin-top: 10px;
            padding-top: 5px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
        }
        /* ì»¨í…Œì´ë„ˆ ë° ë ˆì´ì•„ì›ƒ */
        .container {
            width: 95%;
            max-width: 1400px;
            margin: 25px auto;
            display: flex;
            gap: 30px;
        }

        /* ë°ì´í„°/ì œì–´ íŒ¨ë„ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .dashboard-panel {
            flex: 1;
            /* ğŸ¨ ë³€ê²½: íŒ¨ë„ í…Œë‘ë¦¬ì™€ ê·¸ë¦¼ìë„ ì´ˆë¡ìƒ‰ ê³„ì—´ë¡œ */
            background-color: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid rgba(76, 175, 80, 0.4); /* í—¤ë”ìƒ‰ ê³„ì—´ */
            box-shadow: 0 0 15px rgba(76, 175, 80, 0.3);
            backdrop-filter: blur(3px);
            transition: box-shadow 0.3s;
            position: relative;
            z-index: 10;
        }
        .dashboard-panel:hover {
            box-shadow: 0 0 25px rgba(76, 175, 80, 0.5);
        }

        /* ì œëª© */
        h2 {
            /* ğŸ¨ ë³€ê²½: ì œëª©ìƒ‰ë„ ì§„í•œ ì´ˆë¡ìƒ‰ìœ¼ë¡œ */
            color: #2E7D32; /* ì§™ì€ ì´ˆë¡ìƒ‰ */
            border-bottom: 1px solid #4CAF50;
            padding-bottom: 10px;
            margin-top: 0;
        }
        .data-item {
            margin-bottom: 20px;
            padding: 10px 0;
            border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
        }
        .data-item strong {
            display: block;
            font-size: 1.2em;
            color: #1B5E20; /* ì§™ì€ ë…¹ìƒ‰ */
            margin-bottom: 5px;
        }
        /* ë°ì´í„° ê°’ ìƒ‰ìƒ */
        .data-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #33691E; /* ê°•ì¡°ë¥¼ ìœ„í•œ ì§™ì€ ë…¹ìƒ‰ */
        }

        /* í”„ë¡œê·¸ë ˆìŠ¤ë°” */
        progress {
            width: 100%; height: 8px; -webkit-appearance: none; appearance: none; border-radius: 5px; margin-top: 5px;
        }
        progress::-webkit-progress-bar { background-color: #C8E6C9; border-radius: 5px; } /* ë°ì€ ë…¹ìƒ‰ */
        progress::-webkit-progress-value { background-color: #66BB6A; border-radius: 5px; } /* ì±„ìš°ëŠ” ìƒ‰ìƒ */
        progress::-moz-progress-bar { background-color: #66BB6A; border-radius: 5px; }

        /* ì œì–´ íŒ¨ë„ ë²„íŠ¼ */
        .control-panel p {
            font-size: 1.1em;
            margin-bottom: 10px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            padding-top: 15px;
        }
        .control-panel button {
            /* ğŸ¨ ë³€ê²½: ë²„íŠ¼ ìƒ‰ìƒë„ ì´ˆë¡ìƒ‰ ê³„ì—´ë¡œ */
            background-color: #66BB6A; /* ì¤‘ê°„ ë…¹ìƒ‰ */
            color: #FFFFFF;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 5px;
            width: 100%;
            margin: 10px 0;
            font-weight: bold;
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        .control-panel button:hover {
            background-color: #4CAF50; /* ì§™ì€ ë…¹ìƒ‰ */
            box-shadow: 0 0 10px #81C784;
        }

        /* ì¥ì¹˜ ìƒíƒœ í…ìŠ¤íŠ¸ ìƒ‰ìƒ */
        .status-on { color: #388E3C; } /* ON ìƒ‰ìƒ (ì§™ì€ ë…¹ìƒ‰) */
        .status-off { color: #A5D6A7; } /* OFF ìƒ‰ìƒ (ì—°í•œ ë…¹ìƒ‰) */
        .status-auto { color: #66BB6A; } /* AUTO ìƒ‰ìƒ (ê¸°ì¡´ ì¤‘ê°„ ë…¹ìƒ‰) */


        /* ğŸŒ¿ ë§ˆìš°ìŠ¤ ë‚˜ë­‡ì ì´í™íŠ¸ ìŠ¤íƒ€ì¼ */
        .leaf-particle-summer {
            position: absolute;
            width: 15px; height: 15px;
            background-color: transparent;
            border-radius: 50% 50% 50% 50% / 60% 40% 60% 40%;
            pointer-events: none;
            opacity: 0;
            animation: summerLeafFall 2s forwards;
            transform-origin: center center;
            z-index: 9999;
        }
        /* ì—¬ë¦„ ë‚˜ë­‡ì ìƒ‰ìƒë“¤ (íŒŒë¦‡í•œ ì´ˆë¡ìƒ‰ ê³„ì—´ ìœ ì§€) */
        .leaf-light-green { background-color: rgba(102, 187, 106, 0.8); }
        .leaf-medium-green { background-color: rgba(67, 160, 71, 0.85); }
        .leaf-dark-green { background-color: rgba(27, 94, 32, 0.9); }
        .leaf-lime { background-color: rgba(174, 234, 0, 0.7); }

        @keyframes summerLeafFall {
            0% { transform: translate(0, 0) scale(0.5) rotate(0deg); opacity: 0.8; }
            100% {
                transform: translate(calc(var(--rand-x) * 1px), calc(var(--rand-y) * 1px)) scale(1.2) rotate(calc(var(--rand-deg) * 1deg));
                opacity: 0;
            }
        }

        /* ğŸŒ¿ ë°°ê²½ ë‚˜ë­‡ì ì´í™íŠ¸ ìŠ¤íƒ€ì¼ */
        .background-leaf-summer {
            position: fixed;
            width: 18px;
            height: 18px;
            background-color: transparent;
            border-radius: 50% 50% 50% 50% / 60% 40% 60% 40%;
            pointer-events: none;
            opacity: 0;
            z-index: 9000;
            animation-name: backgroundSummerLeafFall;
            animation-duration: var(--leaf-duration-summer);
            animation-timing-function: linear;
            animation-iteration-count: 1;
            animation-fill-mode: forwards;
        }

        /* ë°°ê²½ ë‚˜ë­‡ì ìƒ‰ìƒ (ì´ˆë¡ìƒ‰ ê³„ì—´ ìœ ì§€) */
        .bg-leaf-light-green { background-color: rgba(102, 187, 106, 0.6); }
        .bg-leaf-medium-green { background-color: rgba(67, 160, 71, 0.7); }
        .bg-leaf-dark-green { background-color: rgba(27, 94, 32, 0.75); }
        .bg-leaf-lime { background-color: rgba(174, 234, 0, 0.5); }

        /* ë°°ê²½ ë‚˜ë­‡ì ì• ë‹ˆë©”ì´ì…˜ (ìœ„ì—ì„œ ì•„ë˜ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ë‚™í•˜) */
        @keyframes backgroundSummerLeafFall {
            0% {
                transform: translateX(var(--start-x)) translateY(-300px) scale(var(--leaf-scale-summer)) rotate(0deg);
                opacity: 0.2;
            }
            10% { opacity: var(--leaf-opacity-summer); }
            90% { opacity: var(--leaf-opacity-summer); }
            100% {
                transform: translateX(calc(var(--end-x) + (var(--wind-x-summer) * 1px))) translateY(calc(100vh + 50px)) scale(var(--leaf-scale-summer)) rotate(calc(var(--rand-deg-summer) * 1deg));
                opacity: 0;
            }
        }
    </style>
</head>
<body>

<header>
    <div id="farm-name-container">
        <h1 id="farm-name"></h1> <button id="edit-name-btn" onclick="editFarmName()">ìˆ˜ì •</button>
    </div>
    <div id="current-time"></div>
</header>

<div class="container">
    <section class="dashboard-panel data-panel">
        <h2>ğŸ“Š ì‹¤ì‹œê°„ í™˜ê²½ ë°ì´í„°</h2>

        <div class="data-item">
            <strong>ì˜¨ë„ (Temperature)</strong>
            <div class="data-value" id="temperature">24.5 Â°C</div>
            <progress id="temp-gauge" value="24.5" max="40"></progress>
        </div>

        <div class="data-item">
            <strong>ìŠµë„ (Humidity)</strong>
            <div class="data-value" id="humidity">65 %</div>
            <progress id="humi-gauge" value="65" max="100"></progress>
        </div>

        <div class="data-item">
            <strong>í† ì–‘ ìˆ˜ë¶„ (Soil Moisture)</strong>
            <div class="data-value" id="soil-moisture">55 %</div>
            <progress id="soil-gauge" value="55" max="100"></progress>
        </div>
    </section>

    <section class="dashboard-panel control-panel">
        <h2>âš™ï¸ ì¥ì¹˜ ì œì–´ ë° ìƒíƒœ</h2>

        <p>í™˜í’ê¸° ìƒíƒœ: <span id="fan-status">OFF</span></p>
        <button onclick="controlDevice('fan')">í™˜í’ê¸° ìƒíƒœ ì „í™˜</button>

        <p>íŒí”„ ìƒíƒœ: <span id="pump-status">AUTO</span></p>
        <button onclick="controlDevice('pump')">íŒí”„ ìƒíƒœ ì „í™˜</button>

        <p>LED ì¡°ëª…: <span id="led-status">ON</span></p>
        <button onclick="controlDevice('led')">LED ì¡°ëª… ìƒíƒœ ì „í™˜</button>
    </section>
</div>

<script>
    // ğŸ’¡ ë³€ê²½: localStorage í‚¤ ì •ì˜
    const FARM_NAME_KEY = 'smartFarmName';
    const defaultFarmName = " ~ì‹ë¬¼ ê´€ë¦¬ì°½ ";

    function updateTime() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        const day = String(now.getDate()).padStart(2, '0');
        const hours = String(now.getHours()).padStart(2, '0');
        const minutes = String(now.getMinutes()).padStart(2, '0');
        const seconds = String(now.getSeconds()).padStart(2, '0');

        const timeString = `${year}ë…„ ${month}ì›” ${day}ì¼ ${hours}:${minutes}:${seconds}`;
        document.getElementById('current-time').textContent = timeString;
    }

    function editFarmName() {
        const farmNameElement = document.getElementById('farm-name');

        // ğŸ’¾ ìˆ˜ì •: í˜„ì¬ ë¡œë“œëœ ì´ë¦„ì„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©
        const currentDisplayedName = farmNameElement.textContent;
        const newName = prompt("ë³€ê²½í•  í—¤ë” ëª…ì¹­:", currentDisplayedName);

        if (newName !== null && newName.trim() !== "") {
            const trimmedName = newName.trim();
            farmNameElement.textContent = trimmedName;

            // ğŸ’¾ ì¶”ê°€: localStorageì— ë³€ê²½ëœ ì´ë¦„ ì €ì¥
            localStorage.setItem(FARM_NAME_KEY, trimmedName);

            alert(" í—¤ë”ê°€ '" + trimmedName + "'(ìœ¼)ë¡œ ë³€ê²½ë©ë‹ˆë‹¤.");
        } else if (newName !== null) {
            alert("ê³µë°±ì€ í—ˆìš© ì•ˆí•¨ ê¸°ì¡´ ì´ë¦„ì´ ìœ ì§€.");
        }
    }

    function controlDevice(device) {
        const statusElement = document.getElementById(device + '-status');
        let currentStatus = statusElement.textContent;
        let newStatus;

        const ON_CLASS = 'status-on';
        const OFF_CLASS = 'status-off';
        const AUTO_CLASS = 'status-auto';

        if (device === 'pump' && currentStatus === 'AUTO') {
             currentStatus = 'OFF';
        }

        if (currentStatus === 'ON') {
            newStatus = 'OFF';
            statusElement.classList.remove(ON_CLASS);
            statusElement.classList.add(OFF_CLASS);
        } else {
            newStatus = 'ON';
            statusElement.classList.remove(OFF_CLASS, AUTO_CLASS);
            statusElement.classList.add(ON_CLASS);
        }

        if (device === 'pump' && newStatus === 'OFF') {
            newStatus = 'AUTO';
            statusElement.classList.remove(ON_CLASS, OFF_CLASS);
            statusElement.classList.add(AUTO_CLASS);
        }

        statusElement.textContent = newStatus;
        console.log(device + " ì¥ì¹˜ë¥¼ " + newStatus + "ë¡œ ì „í™˜ ëª…ë ¹ ì „ì†¡");
        alert(device + " ì¥ì¹˜ë¥¼ " + newStatus + "ë¡œ ì „í™˜í–ˆì–´ìš”!");
    }

    const mouseLeafColorsSummer = ['leaf-light-green', 'leaf-medium-green', 'leaf-dark-green', 'leaf-lime'];

    document.addEventListener('mousemove', function(e) {
        const particle = document.createElement('div');
        particle.className = 'leaf-particle-summer';
        document.body.appendChild(particle);

        const randomColorClass = mouseLeafColorsSummer[Math.floor(Math.random() * mouseLeafColorsSummer.length)];
        particle.classList.add(randomColorClass);

        const size = Math.random() * 8 + 12;
        particle.style.width = size + 'px';
        particle.style.height = size + 'px';

        particle.style.left = (e.clientX - size / 2) + 'px';
        particle.style.top = (e.clientY - size / 2) + 'px';

        particle.style.setProperty('--rand-x', Math.random() * 200 - 100);
        particle.style.setProperty('--rand-y', Math.random() * 200 + 50);
        particle.style.setProperty('--rand-deg', Math.random() * 720 - 360);

        particle.style.animationName = 'summerLeafFall';

        particle.addEventListener('animationend', function() {
            particle.remove();
        });
    });

    const bgLeafColorsSummer = ['bg-leaf-light-green', 'bg-leaf-medium-green', 'bg-leaf-dark-green', 'bg-leaf-lime'];

    function createBackgroundLeafSummer() {
        const leaf = document.createElement('div');
        leaf.className = 'background-leaf-summer';
        document.body.appendChild(leaf);

        const randomColorClass = bgLeafColorsSummer[Math.floor(Math.random() * bgLeafColorsSummer.length)];
        leaf.classList.add(randomColorClass);

        const size = Math.random() * 10 + 15;
        leaf.style.width = size + 'px';
        leaf.style.height = size + 'px';

        const startX = Math.random() * window.innerWidth;
        leaf.style.left = startX + 'px';

        const duration = Math.random() * 6 + 8;

        leaf.style.setProperty('--start-x', startX + 'px');
        leaf.style.setProperty('--end-x', (startX + (Math.random() * 300 - 150)) + 'px');
        leaf.style.setProperty('--rand-deg-summer', Math.random() * 1080 - 540);
        leaf.style.setProperty('--leaf-duration-summer', duration + 's');
        leaf.style.setProperty('--leaf-scale-summer', Math.random() * 0.6 + 0.7);
        leaf.style.setProperty('--leaf-opacity-summer', Math.random() * 0.3 + 0.6);

        leaf.style.setProperty('--wind-x-summer', Math.random() * 80 - 40);

        leaf.style.animationName = 'backgroundSummerLeafFall';

        leaf.addEventListener('animationend', function() {
            leaf.remove();
        });
    }

    setInterval(createBackgroundLeafSummer, 300);

    // ğŸ’¾ ìˆ˜ì •: í˜ì´ì§€ ë¡œë“œ ì‹œ localStorageì—ì„œ ì €ì¥ëœ ì´ë¦„ ë¶ˆëŸ¬ì˜¤ê¸°
    document.addEventListener('DOMContentLoaded', function() {
        const farmNameElement = document.getElementById('farm-name');

        // localStorageì—ì„œ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
        const savedName = localStorage.getItem(FARM_NAME_KEY);

        if (savedName) {
            // ì €ì¥ëœ ì´ë¦„ì´ ìˆìœ¼ë©´ ê·¸ ê°’ì„ ì‚¬ìš©
            farmNameElement.textContent = savedName;
        } else {
            // ì €ì¥ëœ ì´ë¦„ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©
            farmNameElement.textContent = defaultFarmName;
        }


        // ì´ˆê¸° ìƒíƒœ ìƒ‰ìƒ ì„¤ì • (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
        const devices = ['fan', 'pump', 'led'];
        devices.forEach(device => {
            const statusElement = document.getElementById(device + '-status');
            const status = statusElement.textContent;

            if (status === 'ON') {
                statusElement.classList.add('status-on');
            } else if (status === 'OFF') {
                statusElement.classList.add('status-off');
            } else if (status === 'AUTO') {
                statusElement.classList.add('status-auto');
            }
        });
    });

    updateTime();
    setInterval(updateTime, 1000);
</script>
</body>
</html>